<div class="min-h-screen flex items-center justify-center">
  <div class="bg-white p-6 rounded-xl shadow w-full max-w-sm">
    <h2 class="text-2xl font-bold mb-4 text-center">Login</h2>

    @if (isLoggedIn$ | async ) {
      <div class="mb-4 text-center">
        @if (user$ | async ) {
          <div class="text-green-600">
            Signed in as <span class="font-semibold">{{ (user$ | async)?.username }}</span>
          </div>
        }
      </div>
    } @else {
      <ng-container *ngTemplateOutlet="loginForm"></ng-container>
    }

    <ng-template #loginForm>
      <form [formGroup]="form" (ngSubmit)="submit()">
        <mat-form-field appearance="fill" class="w-full mb-4">
          <mat-label>Username</mat-label>
          <input matInput formControlName="username" autocomplete="username" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full mb-4">
          <mat-label>Password</mat-label>
          <input
            matInput
            [type]="hidePassword() ? 'password' : 'text'"
            formControlName="password"
            autocomplete="current-password"
          />
          <button mat-icon-button matSuffix type="button" (click)="togglePasswordVisibility()">
            <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </mat-form-field>

        <button type="submit" mat-raised-button color="primary" class="w-full" [disabled]="form.invalid">
          Login
        </button>
      </form>
    </ng-template>
  </div>
</div>
